<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/google-map/google-map.html">
<link rel="import" href="../bower_components/google-map/google-map-directions.html">
<link rel="import" href="../bower_components/google-map/google-map-poly.html">
<link rel="import" href="../bower_components/google-map/google-map-point.html">
<link rel="import" href="../bower_components/google-map/google-map-search.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/geo-location/geo-location.html">

<dom-module id="my-view3">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      [hidden] {
        display: none !important;
      }

      paper-card {
        display: inline-flex;
        z-index: 1;
      }

      paper-tabs {
        --paper-tabs-selection-bar-color: #0D47A1;
        margin-top: 16px;
      }

      paper-tab {
        --paper-tab-ink: #BBDEFB;
      }

      /* Other styles that make things more pleasant.
       These could instead be added in styles.css since they
       do not use any Polymer styling features. */



      paper-tab.iron-selected {
        background: rgb(66, 133, 244);
        color: white;
      }

      paper-icon-item {
        text-align: justify;
        padding-left: 0;
        padding-right: 0;

      }

      .flex-cont {
        text-align: center;
        position: absolute;
        left: 0;
        right: 0;
      }

      #information {
        text-align: center;
        position: absolute;
        left: 0;
        right: 0;
      }

      #map {
        width: 100vw;
        height: 100vh;
      }
    </style>

    <div class="flex-cont">
      <geo-location id="positionUtilisateur" latitude="{{userLat}}" longitude="{{userLong}}" on-geo-response="_onGeoResponse"></geo-location>

      <div>
        <paper-card elevation="2">
          <paper-icon-item>
            <paper-input label="Où rechercher?" value="{{recherche}}"></paper-input>
            <iron-icon icon="search" item-icon></iron-icon>
            <button type="button" on-click="_onClickSearch">Rechercher</button>
          </paper-icon-item>
        </paper-card>
      </div>
      <p id="information" hidden="[[hidetext]]">Comme vous n'avez pas activé la géolocalisation sur votre appareil ! Effectuez une recherche afin de trouver les distributeurs
        dans le lieu qui vous interresse.
      </p>
    </div>

    <google-map-search map="[[map]]" query={{recherche}} results="{{results}}">
    </google-map-search>

    <google-map id="map" hidden="[[hidemap]]" latitude="{{userLat}}" longitude="{{userLong}}" zoom="9" map="{{map}}" api-key="AIzaSyCj8AWq5dHhpamWZi8yMD2vlSdyZ-FR3Os">
    </google-map>




  </template>

  <script>
    class MyView3 extends Polymer.Element {
      static get is() { return 'my-view3'; }

      static get properties() {
        return {
          hidemap: {
            type: String,
            value: "hidden"
          },
          hidetext: {
            type: String,
            value: ""
          },
          userLat: {
            type: Number,
            value: ""
          },
          userLong: {
            type: Number,
            value: ""
          }
        }
      }

      _onClickSearch(event) {
        console.log('_onClickSearch');
        this.hidemap = "";
        this.hidetext = "hidden";
      }

      _onGeoResponse(event) {
        console.log('_onGeoResponse');
        this.hidemap = "";
        this.hidetext = "hidden";

      }
    }

    window.customElements.define(MyView3.is, MyView3);
  </script>
</dom-module>